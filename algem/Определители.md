## Перестановки и подстановки
### Перестановки и число инверсий
> [!abstract] Перестановка
> ==Перестановкой== множества числе $1, 2, \dots, n$ называется любая последовательность длины $n$, в которой каждое число от $1$ до $n$ входит в точности один раз.

> [!abstract] Число инверсий
> ==Числом инверсий== перестановки называется количество пар вида $(i, j),\ i < j$ таких, что в перестановке $g$ элемент $j$ имеет меньший номер, чем элемент $i$.

**Пример:** в перестановке $(1, 2, 4, 3)$ одна инверсия, а в перестановке $(4, 2, 1, 3)$ - $4$ инверсии.

> [!abstract] Чётная перестановка
> Перестановка называется ==чётной==, если в ней чётное число инверсий, и нечётной, если в ней нечётное число инверсий.

### Теорема о чётности перестановки
**Теорема**
Пусть $g$ - перестановка. Тогда при перестановке любой пары элементов чётность подстановки меняется.

**Доказательство**
Пусть $g$ имеет $m$ инверсий. 
1) Рассмотрим случай, когда переставляются соседние элементы. $g = (i_1, \dots, i_k, i_{k+1}, \dots, i_n)$. Если $i_k < i_{k+1}$, то образуется ровно одна новая инверсия.
2) $(i_1, \dots, i_k, i_{k+1}, \dots, i_{s - 1}, i_s, \dots, i_n)$. Мы переставляем $i_k$ и $i_s$.
   - $(i_1, \dots, i_k, i_{k+1},, i_{k+2} \dots, i_k, i_s, \dots,i_n)$. Мы сделаем $s - 1 - k$ перестановок соседних элементов, тогда чётность поменяется $ s - 1 - k$ раз.
   - Просто переставляем $i_k$ и $i_s$. $(i_1, \dots, i_{k+1}, \dots, i_{k+2}, \dots, i_s, i_k, \dots, i_n)$. Чётность меняется на $1$.
   - Ведём $i_s$ назад на то место, где сейчас находится $i_{k+1}$, на которой вначале стоял $i_k$. Снова после $s - 1 - k$ перестановок чётность поменяется.
Осталось заметить, что чётность поменялась нечётное количество раз.



### Подстановки

> [!abstract] Подстановка
> ==Подстановка== на множестве чисел от $1$ до $n$ - биекция на множестве $\left \{ 1, 2, \dots, n\right \}$. Подстановку можно записать в следующем виде: $\begin{pmatrix} 1 & 2 & \dots & n \\ i_1 & i_2 & \dots & i_n \end{pmatrix}$. Верхний ряд не обязательно записывать по порядку.

> [!note] 
> Подстановка состоит из двух перестановок (из перестановки в верхнем ряду и перестановки в нижнем ряду).

> [!abstract] Число инверсий
> ==Числом инверсий== подстановки называется сумма чисел инверсии её перестановок.

> [!abstract] Чётность подстановки
> Подстановка называется чётной, если её число инверсий чётно.

### Теорема о чётности подстановок
**Теорема**
1) Любая подстановка может быть представлена в  каноническом виде
2) Чётность подстановки не зависит от упорядочения верхнего ряда

**Доказательство**
1) Просто записываем подстановку по порядку. Очевидно, что ей соответствует то же самое отображение
2) $\begin{pmatrix} a_1 & \dots & a_i & \dots & a_k &\dots & a_n \\ b_1 & \dots & b_i & \dots & b_k &\dots & b_n\end{pmatrix}$. Переставим в этой подстановке $i$-й и $k$-й элементы. При этом сама подстановка не изменится. При этом по предыдущей теореме чётность не изменилась, т.к. одновременно изменились чётности верхнего и нижнего ряда.

### Единичные и обратные подстановки
> [!abstract] Единичная подстановка
> Подстановка вида $\begin{pmatrix} 1 & 2 & \dots & n \\ 1 & 2 & \dots & n\end{pmatrix}$ называется ==единичной==. 

Для каждой подстановки $g = \begin{pmatrix} 1 & 2 & \dots & n \\ i_1 & i_2 & \dots & i_n\end{pmatrix}$ есть обратная $g^{-1} = \begin{pmatrix} i_1 & i_2 & \dots & i_n \\ 1 & 2 & \dots & n\end{pmatrix}$ 


> [!NOTE] Чётность обратной подстановки
> Обратная подстановка имеет такую же чётность, как исходная.


## Определители
### Определители малых порядков
$$A = \begin{vmatrix} a_{11} & a_{12} \\ a_{21} & a_{22}\end{vmatrix} = a_{11}a_{22} - a_{12}a_{21}$$
$$A = \begin{vmatrix} a_{11} & a_{12} & a_{13} \\ a_{21} & a_{22} & a_{23} \\ a_{31} & a_{32} & a_{33} \end{vmatrix} = a_{11} \begin{vmatrix} a_{22} & a_{23} \\ a_{32} & a_{33} \end{vmatrix} - a_{12} \begin{vmatrix} a_{21} & a_{23} \\ a_{31} & a_{33} \end{vmatrix} + a_{31} \begin{vmatrix} a_{21} & a_{22} \\ a_{31} & a_{32} \end{vmatrix} = $$
$$= a_{11}a_{22}a_{33} - a_{11}a_{23}a_{32} - a_{12}a_{21}a_{33} + a_{12}a_{23}a_{31} + a_{13}a_{21}a_{32} - a_{13}a_{22}a_{31}$$

1) В каждом слагаемом нет элеметнов, лежащих в одной строке или столбце
2) Каждому слагаемому соответствует подстановка $\begin{pmatrix} 1 & 2 & 3 \\ i_1 & i_2 & i_3\end{pmatrix}$, где верхний ряд - номера столбцов, нижний ряд - номера строк соответствуюшщих элементов.
### Определитель в общем случае
Пусть $S_n$ - множество всех подстановок $\left \{1,2,\dots, n\right \}$. Тогда $|S_n| = n!$

> [!abstract] Определитель
> Пусть $a$ - матрица $n\times n$: $\begin{pmatrix} a_{11} & a_{12} & \dots & a_{1n} \\ a_{21} & a_{22} & \dots & a_{2n} \\ \dots & \dots & \dots & \dots \\ a_{n1} & a_{n2} & \dots & a_{nn} \end{pmatrix}$. ==Определителем== такой матрицы называется число $|A| = \det A = \sum\limits_{g\in S_n} (-1)^g a_{1g(1)}a_{2g(2)}\dots a_{ng(n)}$. Под $g$ в $(-1)^g$ имеется в виду чётность подстановки $g$.

### Транспонирование матриц
> [!abstract] Транспонированная матрица
> Матрица $A^T$, полученная из $A$ заменой строк на столбцы и столбцов на строки, или симметрией относитеьно главной диагонали $A$, называется ==транспонированной== к $A$.

### Теорема об определителе транспонированной матрицы
**Теорема**
$|A| = |A^T|$

**Доказательство**
$$|A| = \sum\limits_{g\in S_n} (-1)^g a_{1g(1)}a_{2g(2)}\dots a_{ng(n)} \quad (*)$$. Поскольку строки транспонированной матрицы меняются на столбцы (можно сказать, что местами меняются верхняя и нижняя строка каждой перестановки), то $$|A^T| = \sum\limits_{g\in S_n} (-1)^{g^{-1}} a_{g(1)1}a_{g(2)2}\dots a_{g(n)n}\quad (**)$$.
Заметим, что в $(*)$ и в $(**)$ одинаковоке количество слагаемых, и что для каждой подстановки $g$ в $|A|$ эта подстановка есть и в $|A^T|$. Слагаемому $a_{1g(1)}a_{2g(2)}\dots a_{ng(n)}$ соответствует слагаемое $a_{g(1)1}a_{g(2)2}\dots a_{g(n)n}$ (в транспонированной матрице). То есть слагаемые не изменились, то задаются обратными подстановками. Но для обратной подстановки чётность сохраняется, поэтому знаки слагаемых сохраняются.

### Теорема о свойствах определителя
**Теорема**
1) $|A| = |A^T|$
2) При умножении строки определителя на число, весь определитель умножается на это число
3) Если определитель содержит нулевую строку, то он равен нулю.
4) Если в определителе поменять местами две строки, то он поменяет знак.
5) Если в определителе есть одинаковые строки, то он равен нулю.
6) Если в определите есть пропорциональные строки, то он равен нулю.
7) Разложение определителя в сумму определителей. $\begin{vmatrix} a_{11} & \dots & a_{1k-1} & b_{1k} + c_{1k} & a_{1k + 1} & \dots & a_{tn} \\ \dots & \dots & \dots &  \dots & \dots & \dots & \dots \\ a_{m1} & \dots & a_{mk-1} & b_{mk} + c_{mk} & a_{mk + 1} & \dots & a_{tn}  \\ dots & \dots & \dots &  \dots & \dots & \dots & \dots \\ a_{n1} & \dots & a_{nk-1} & b_{nk} + c_{nk} & a_{nk + 1} & \dots & a_{nn} \end{vmatrix}$

Все свойства определителя, справедливые для строк, остаются справедливыми для столбцов, и наоборот.

**Доказательство**
2) $\begin{vmatrix} a_{11} & a_{12} & \dots & a_{1n} \\ a_{21} & a_{22} & \dots & a_{2n} \\ \dots & \dots & \dots & \dots \\ ta_{k1} & ta_{k2} & \dots & t_a{kn} \\ \dots & \dots & \dots & \dots \\ a_{n1} & a_{n2} & \dots & a_{nn} \end{vmatrix} = \sum\limits_{g\in S_n} (-1)^g a_{1g(1)}\dots t(a_{kg(k)}) \dots a_{ng(n)}$. По свойству определителя каждое слагаемое умножится на $t$, поэтому значение определителя уможится на $t$
3) Следует из 2).
4) $\begin{vmatrix} a_{11} & a_{12} & \dots & a_{1n} \\ a_{21} & a_{22} & \dots & a_{2n} \\ \dots & \dots & \dots & \dots \\ ta_{k1} & ta_{k2} & \dots & t_a{kn} \\ \dots & \dots & \dots & \dots \\ a_{m1} & a_{m2} & \dots & a_{mn} \\ \dots & \dots & \dots & \dots \\ a_{n1} & a_{n2} & \dots & a_{nn} \end{vmatrix} = \sum\limits_{g\in S_n} (-1)^g a_{1g(1)}\dots t(a_{kg(k)}) \dots a_{ng(n)}$. Если переставить местами строки, в каждом слагаемом поменяется чётность подстановки, то есть слагаемому будет соответствовать оно же со знаком $-$.
5) Следует из свойства 4, т.к. если переставить эти строки местами, то он должен поменять знак, но сам определитель не изменится, поэтому он равен нулю. 
6) Из свойств 2) и 5)
7) $$\begin{vmatrix} a_{11} & \dots & a_{1k-1} & b_{1k} + c_{1k} & a_{1k + 1} & \dots & a_{tn} \\ \dots & \dots & \dots &  \dots & \dots & \dots & \dots \\ a_{m1} & \dots & a_{mk-1} & b_{mk} + c_{mk} & a_{mk + 1} & \dots & a_{tn}  \\ dots & \dots & \dots &  \dots & \dots & \dots & \dots \\ a_{n1} & \dots & a_{nk-1} & b_{nk} + c_{nk} & a_{nk + 1} & \dots & a_{nn} \end{vmatrix} = $$ $$= \sum\limits_{g\in S_n} (-1)^g a_{1g(1)}(b_{g(k)k} + c_{g(k)k})\dots a_{g(n)n} + $$ 
