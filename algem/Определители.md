## Перестановки и подстановки
### Перестановки и число инверсий
> [!abstract] Перестановка
> ==Перестановкой== множества числе $1, 2, \dots, n$ называется любая последовательность длины $n$, в которой каждое число от $1$ до $n$ входит в точности один раз.

> [!abstract] Число инверсий
> ==Числом инверсий== перестановки называется количество пар вида $(i, j),\ i < j$ таких, что в перестановке $g$ элемент $j$ имеет меньший номер, чем элемент $i$.

**Пример:** в перестановке $(1, 2, 4, 3)$ одна инверсия, а в перестановке $(4, 2, 1, 3)$ - $4$ инверсии.

> [!abstract] Чётная перестановка
> Перестановка называется ==чётной==, если в ней чётное число инверсий, и нечётной, если в ней нечётное число инверсий.

### Теорема о чётности перестановки
**Теорема**
Пусть $g$ - перестановка. Тогда при перестановке любой пары элементов чётность подстановки меняется.

**Доказательство**
Пусть $g$ имеет $m$ инверсий. 
1) Рассмотрим случай, когда переставляются соседние элементы. $g = (i_1, \dots, i_k, i_{k+1}, \dots, i_n)$. Если $i_k < i_{k+1}$, то образуется ровно одна новая инверсия.
2) $(i_1, \dots, i_k, i_{k+1}, \dots, i_{s - 1}, i_s, \dots, i_n)$. Мы переставляем $i_k$ и $i_s$.
   - $(i_1, \dots, i_k, i_{k+1},, i_{k+2} \dots, i_k, i_s, \dots,i_n)$. Мы сделаем $s - 1 - k$ перестановок соседних элементов, тогда чётность поменяется $ s - 1 - k$ раз.
   - Просто переставляем $i_k$ и $i_s$. $(i_1, \dots, i_{k+1}, \dots, i_{k+2}, \dots, i_s, i_k, \dots, i_n)$. Чётность меняется на $1$.
   - Ведём $i_s$ назад на то место, где сейчас находится $i_{k+1}$, на которой вначале стоял $i_k$. Снова после $s - 1 - k$ перестановок чётность поменяется.
Осталось заметить, что чётность поменялась нечётное количество раз.



### Подстановки

> [!abstract] Подстановка
> ==Подстановка== на множестве чисел от $1$ до $n$ - биекция на множестве $\left \{ 1, 2, \dots, n\right \}$. Подстановку можно записать в следующем виде: $\begin{pmatrix} 1 & 2 & \dots & n \\ i_1 & i_2 & \dots & i_n \end{pmatrix}$. Верхний ряд не обязательно записывать по порядку.

> [!note] 
> Подстановка состоит из двух перестановок (из перестановки в верхнем ряду и перестановки в нижнем ряду).

> [!abstract] Число инверсий
> ==Числом инверсий== подстановки называется сумма чисел инверсии её перестановок.

> [!abstract] Чётность подстановки
> Подстановка называется чётной, если её число инверсий чётно.

### Теорема о чётности подстановок
**Теорема**
1) Любая подстановка может быть представлена в  каноническом виде
2) Чётность подстановки не зависит от упорядочения верхнего ряда

**Доказательство**
1) Просто записываем подстановку по порядку. Очевидно, что ей соответствует то же самое отображение
2) $\begin{pmatrix} a_1 & \dots & a_i & \dots & a_k &\dots & a_n \\ b_1 & \dots & b_i & \dots & b_k &\dots & b_n\end{pmatrix}$. Переставим в этой подстановке $i$-й и $k$-й элементы. При этом сама подстановка не изменится. При этом по предыдущей теореме чётность не изменилась, т.к. одновременно изменились чётности верхнего и нижнего ряда.

### Единичные и обратные подстановки
> [!abstract] Единичная подстановка
> Подстановка вида $\begin{pmatrix} 1 & 2 & \dots & n \\ 1 & 2 & \dots & n\end{pmatrix}$ называется ==единичной==. 

Для каждой подстановки $g = \begin{pmatrix} 1 & 2 & \dots & n \\ i_1 & i_2 & \dots & i_n\end{pmatrix}$ есть обратная $g^{-1} = \begin{pmatrix} i_1 & i_2 & \dots & i_n \\ 1 & 2 & \dots & n\end{pmatrix}$ 


> [!NOTE] Чётность обратной подстановки
> Обратная подстановка имеет такую же чётность, как исходная.


## Определители
### Определители малых порядков
$$A = \begin{vmatrix} a_{11} & a_{12} \\ a_{21} & a_{22}\end{vmatrix} = a_{11}a_{22} - a_{12}a_{21}$$
$$A = \begin{vmatrix} a_{11} & a_{12} & a_{13} \\ a_{21} & a_{22} & a_{23} \\ a_{31} & a_{32} & a_{33} \end{vmatrix} = a_{11} \begin{vmatrix} a_{22} & a_{23} \\ a_{32} & a_{33} \end{vmatrix} - a_{12} \begin{vmatrix} a_{21} & a_{23} \\ a_{31} & a_{33} \end{vmatrix} + a_{31} \begin{vmatrix} a_{21} & a_{22} \\ a_{31} & a_{32} \end{vmatrix} = $$
$$= a_{11}a_{22}a_{33} - a_{11}a_{23}a_{32} - a_{12}a_{21}a_{33} + a_{12}a_{23}a_{31} + a_{13}a_{21}a_{32} - a_{13}a_{22}a_{31}$$

1) В каждом слагаемом нет элеметнов, лежащих в одной строке или столбце
2) Каждому слагаемому соответствует подстановка $\begin{pmatrix} 1 & 2 & 3 \\ i_1 & i_2 & i_3\end{pmatrix}$, где верхний ряд - номера столбцов, нижний ряд - номера строк соответствуюшщих элементов.
### Определитель в общем случае
Пусть $S_n$ - множество всех подстановок $\left \{1,2,\dots, n\right \}$. Тогда $|S_n| = n!$

> [!abstract] Определитель
> Пусть $a$ - матрица $n\times n$: $\begin{pmatrix} a_{11} & a_{12} & \dots & a_{1n} \\ a_{21} & a_{22} & \dots & a_{2n} \\ \dots & \dots & \dots & \dots \\ a_{n1} & a_{n2} & \dots & a_{nn} \end{pmatrix}$. ==Определителем== такой матрицы называется число $|A| = \det A = \sum\limits_{g\in S_n} (-1)^g a_{1g(1)}a_{2g(2)}\dots a_{ng(n)}$. Под $g$ в $(-1)^g$ имеется в виду чётность подстановки $g$.

### Транспонирование матриц
> [!abstract] Транспонированная матрица
> Матрица $A^T$, полученная из $A$ заменой строк на столбцы и столбцов на строки, или симметрией относитеьно главной диагонали $A$, называется ==транспонированной== к $A$.

### Теорема об определителе транспонированной матрицы
**Теорема**
$|A| = |A^T|$

**Доказательство**
$$|A| = \sum\limits_{g\in S_n} (-1)^g a_{1g(1)}a_{2g(2)}\dots a_{ng(n)} \quad (*)$$. Поскольку строки транспонированной матрицы меняются на столбцы (можно сказать, что местами меняются верхняя и нижняя строка каждой перестановки), то $$|A^T| = \sum\limits_{g\in S_n} (-1)^{g^{-1}} a_{g(1)1}a_{g(2)2}\dots a_{g(n)n}\quad (**)$$.
Заметим, что в $(*)$ и в $(**)$ одинаковоке количество слагаемых, и что для каждой подстановки $g$ в $|A|$ эта подстановка есть и в $|A^T|$. Слагаемому $a_{1g(1)}a_{2g(2)}\dots a_{ng(n)}$ соответствует слагаемое $a_{g(1)1}a_{g(2)2}\dots a_{g(n)n}$ (в транспонированной матрице). То есть слагаемые не изменились, то задаются обратными подстановками. Но для обратной подстановки чётность сохраняется, поэтому знаки слагаемых сохраняются.

### Теоремы о свойствах определителя

> [!abstract] Минор
> ==Минор== матрицы $M_{ij}$ для элемента $a_{ij$ получается вычёркиванием $i$-й строки и $j$-го столбца из $a_{ij}$


> [!abstract] Алгебраическое дополнение
> Алгебраическим дополнением элемента $a_{ij}$ называется число $A_{ij} = (-1)^{i+j} |M_{ij}|$


**Теорема**
1) $|A| = |A^T|$
2) При умножении строки определителя на число, весь определитель умножается на это число
3) Если определитель содержит нулевую строку, то он равен нулю.
4) Если в определителе поменять местами две строки, то он поменяет знак.
5) Если в определителе есть одинаковые строки, то он равен нулю.
6) Если в определите есть пропорциональные строки, то он равен нулю.
7) Разложение определителя в сумму определителей. $\begin{vmatrix} a_{11} & \dots & a_{1k-1} & b_{1k} + c_{1k} & a_{1k + 1} & \dots & a_{tn} \\ \dots & \dots & \dots &  \dots & \dots & \dots & \dots \\ a_{m1} & \dots & a_{mk-1} & b_{mk} + c_{mk} & a_{mk + 1} & \dots & a_{tn}  \\ dots & \dots & \dots &  \dots & \dots & \dots & \dots \\ a_{n1} & \dots & a_{nk-1} & b_{nk} + c_{nk} & a_{nk + 1} & \dots & a_{nn} \end{vmatrix}$
8) Если к одной строке определителя прибавить другую строку, умноженную на число, то значение определителя не изменится.
9) Разложение по строке: $|A| = a_{k1}A_{k1} + a_{k2}A_{k2} + \dots + a_{kn}A_{kn}$
10) Сумма произведений алегбраических дополнений элементов одной строки на алгебраические дополнения другой строки равна нулю
11) Определитель треугольной матрицы равен произведению диагональных элементов
12) Любой определитель можно вычислить приведением к треугольному виду.

Все свойства определителя, справедливые для строк, остаются справедливыми для столбцов, и наоборот.

**Доказательство**
2) $\begin{vmatrix} a_{11} & a_{12} & \dots & a_{1n} \\ a_{21} & a_{22} & \dots & a_{2n} \\ \dots & \dots & \dots & \dots \\ ta_{k1} & ta_{k2} & \dots & t_a{kn} \\ \dots & \dots & \dots & \dots \\ a_{n1} & a_{n2} & \dots & a_{nn} \end{vmatrix} = \sum\limits_{g\in S_n} (-1)^g a_{1g(1)}\dots t(a_{kg(k)}) \dots a_{ng(n)}$. По свойству определителя каждое слагаемое умножится на $t$, поэтому значение определителя уможится на $t$
3) Следует из 2).
4) $\begin{vmatrix} a_{11} & a_{12} & \dots & a_{1n} \\ a_{21} & a_{22} & \dots & a_{2n} \\ \dots & \dots & \dots & \dots \\ ta_{k1} & ta_{k2} & \dots & t_a{kn} \\ \dots & \dots & \dots & \dots \\ a_{m1} & a_{m2} & \dots & a_{mn} \\ \dots & \dots & \dots & \dots \\ a_{n1} & a_{n2} & \dots & a_{nn} \end{vmatrix} = \sum\limits_{g\in S_n} (-1)^g a_{1g(1)}\dots t(a_{kg(k)}) \dots a_{ng(n)}$. Если переставить местами строки, в каждом слагаемом поменяется чётность подстановки, то есть слагаемому будет соответствовать оно же со знаком $-$.
5) Следует из свойства 4, т.к. если переставить эти строки местами, то он должен поменять знак, но сам определитель не изменится, поэтому он равен нулю. 
6) Из свойств 2) и 5)
7) $$\begin{vmatrix} a_{11} & \dots & a_{1k-1} & b_{1k} + c_{1k} & a_{1k + 1} & \dots & a_{tn} \\ \dots & \dots & \dots &  \dots & \dots & \dots & \dots \\ a_{m1} & \dots & a_{mk-1} & b_{mk} + c_{mk} & a_{mk + 1} & \dots & a_{tn}  \\ dots & \dots & \dots &  \dots & \dots & \dots & \dots \\ a_{n1} & \dots & a_{nk-1} & b_{nk} + c_{nk} & a_{nk + 1} & \dots & a_{nn} \end{vmatrix} = $$ $$= \sum\limits_{g\in S_n} (-1)^g a_{1g(1)}(b_{g(k)k} + c_{g(k)k})\dots a_{g(n)n} + $$ %%КАВО%%
8) Добавим к $m$-й строке $k$-ю, умноженную на $t$ $$\begin{vmatrix} a_{11} & a_{12} & \dots & a_{1n} \\ \dots & \dots & \dots & \dots \\ a_{k1} & a_{k2} & \dots & a_{kn} \\ \dots & \dots & \dots & \dots \\ a_{m1} & a_{m2} & \dots & a_{mn} \\ \dots & \dots & \dots & \dots \\ a_{n1} & a_{n2} & \dots & a_{nn}\end{vmatrix} = \begin{vmatrix} a_{11} & a_{12} & \dots & a_{1n} \\ \dots & \dots & \dots & \dots \\ a_{k1} & a_{k2} & \dots & a_{kn} \\ \dots & \dots & \dots & \dots \\ a_{m1} + ta_{k1} & a_{m2} + ta_{k2} & \dots & a_{mn} + ta_{kn} \\ \dots & \dots & \dots & \dots \\ a_{n1} & a_{n2} & \dots & a_{nn}\end{vmatrix} = $$
   $$= \begin{vmatrix} a_{11} & a_{12} & \dots & a_{1n} \\ \dots & \dots & \dots & \dots \\ a_{k1} & a_{k2} & \dots & a_{kn} \\ \dots & \dots & \dots & \dots \\ a_{m1} & a_{m2} & \dots & a_{mn} \\ \dots & \dots & \dots & \dots \\ a_{n1} & a_{n2} & \dots & a_{nn}\end{vmatrix} + \begin{vmatrix} a_{11} & a_{12} & \dots & a_{1n} \\ \dots & \dots & \dots & \dots \\ a_{k1} & a_{k2} & \dots & a_{kn} \\ \dots & \dots & \dots & \dots \\ ta_{k1} &  ta_{k2} & \dots & ta_{kn} \\ \dots & \dots & \dots & \dots \\ a_{n1} & a_{n2} & \dots & a_{nn}\end{vmatrix}$$
   Во втором определителе имеем пропорциональные строки, т.е. он равен нулю, т.е. исходный определитель не изменился.
9) Достаточно доказать для разложения по первой строке. Рассмотрим определение определителя. $$\begin{vmatrix} a_{11} & a_{12} & \dots & a_{1n} \\ a_{21} & a_{22} & \dots & a_{2n} \\ \dots & \dots & \dots & \dots \\ a_{n1} & a_{n2} & \dots & a_{nn} \\  \end{vmatrix}= \sum\limits_{g\in S_n} (-1)^g a_{1g(1)}a_{2g(2)}\dots a_{ng(n)} = a_{11}R_1 + a_{12}R_2 + \dots + a_{1n}R_n$$. Покажем, что в $R_1, R_2, \dots, R_n$ произведение элементов входит с нужным знаком. Возьмём элемент $a_{1k}a_{2g(2)}\dots a_{ng(n)}$. Ему соответствует подстановка $\begin{pmatrix} 1 & 2 & \dots & n \\ k & g(2) & \dots & g(n)\end{pmatrix},\ g(i)\neq k$. Тогда в определителе $A_{1k} = (-1)^{k+1}|M_{1k}|$ будет другая нумерация элементов. Пусть $B_k = M_{1k}$, тогда $\begin{pmatrix} 1 & 2 & \dots & n \\ k & g(2) & \dots & g(n)\end{pmatrix}$. Фактически мы переставили $k$-й элемент на первое место. Для этого мы его переставили $k -1$ раз, то есть его знак теперь - $(-1)^{k-1}$, то есть получился такой же знак, как и для числа $k+1$.
10) $a_{k1}A_{m1}+ a{k2}A_{m2} + \dots + a_{kn}A_{mn} =$ В алгебраических дополнениях $A_{ms}$ нет $m$-й строки, т.е. получить такую сумму - то жке самое, что взять определитель матрицы, у которой $m$-я строка совпадает с $k$-й и разложить по $m$-й строке.
11) $\begin{vmatrix}a_{11} & a{12} & \dots & a_{1n} \\ 0 & a_{22} & \dots & a_{2n} \\ \dots & \dots & \dots & \dots \\ 0 & 0 & \dots & a_{nn}\end{vmatrix}$. Необходимо разложить определитель по первому столбцу. Получаем $a_{11}$ на такой же определитель, кроме первой строки. Повторим этот шаг $n$ раз. Очевидно, что определитель разложится в произведение диагональных элементов.
12) Следствие св-в **8)** и **11)**
## Полураспавшаяся матрица

> [!abstract] Полураспавшаяся матрица
> Матрица вида $\begin{pmatrix} A & N \\ O & B\end{pmatrix}$, где матрицы $A$ и $B$ - квадратные, $O$ - нулевая матрица называется ==полураспавшейся==.

### Теорема об определителе полураспавшейся матрицы
**Теорема**
$$\begin{vmatrix} A & N \\ O & B\end{vmatrix} = |A|\cdot |B|$$

**Доказательство**
Докажем индукцией по порядку матрицы $A$
1) $p = 1$. $\begin{vmatrix} a_{11} & N \\ O & B\end{vmatrix}$. Таким образом, $O$ - столбец из нулей. Раскладываем матрицу $M$ по первому столбцу и получаем $|M| = a_{11}|B| = |A|\cdot |B|$
2) Пусть доказано для матриц порядка меньшего, чем $p$: $$\begin{vmatrix} a_{11} & a_{12} & \dots & a_{1p} & ** & \dots & ** \\ \dots & \dots & \dots & \dots & \dots & \dots & \dots \\ a_{p1} & a_{p2} & \dots & a_{pp} & ** & \dots & ** \\ 0 & 0 & \dots & 0 & b_{11} & \dots & b_{1s} \\ \dots & \dots & \dots & \dots & \dots & \dots & \dots \\ 0 & 0 & \dots & 0 & b_{s1} & \dots & b_{ss}\end{vmatrix} = \left\{ \text{разложим по первому столбцу}\right \} = $$
   $$= a_{11}(-1)^{1 + 1} \begin{vmatrix} M_{11} & * \\ O & B\end{vmatrix} + \dots + a_{k1}(-1)^{k + 1} \begin{vmatrix} M_{1k} & ** \\ O & B\end{vmatrix} + a_{p1}(-1)^{p + 1} \begin{vmatrix} M_{p1} & * \\ O & B\end{vmatrix} = $$
   $$= |A|\cdot |B|$$
### Теорема об определителе прозведения матриц
**Теорема**
Если $A, B$ - квадратные матрицы размера $n\times n$, то $|AB| = |A|\cdot |B|$

**Доказательство**
Построим специальную матрицу $D = \begin{vmatrix}A & O \\ -E & B\end{vmatrix}$, где $-E$ - единичная матрица размера $n\times n$, у которой на главной диагонали стоят $-1$, а остальные элементы - нули. Очевидно, что $D$ - транспонированная к полураспавшейся, и её определитель $|D| = |A|\cdot |B|$.
$$\begin{vmatrix} a_{11} & \dots & 0 & \dots & 0 \\ \dots & \dots & \dots & \dots & \dots \\ a_{n1} & \dots & a_{2n} & 0 & \dots & 0 \\ -1 & \dots & 0 & b_{11} & \dots & b_{1n}  \\ \dots & \dots & \dots & \dots & \dots  \\ 0 & \dots & -1 & b_{n1} & \dots & b_{nn}\end{vmatrix}$$
Начнём обнулять позиции, где есть элементы $b_{ij}$. Далее к $n+1$-му столбцу прибавим второй столбец, умноженный на $b_{21}$. Далее к $n+1$-му столбцу прибавим $n$-ый, умноженный на $b_{n1}$. Таким образом, в первых $n$ строках получившейся матрицы расположен первый столбец матрицы $A\cdot B$. Проделывая аналогичные действия со $n+2$-м столбцом, далее  - с $2n$ столбцом, получим следующую матрицу: $\begin{vmatrix}A & C \\ -E & 0\end{vmatrix}$. Переставим $n+1$-й столбец с $1$-м, $n+2$-й - со $2$-м, и так далее. Получим определитель следующего вида: $(-1)^n\begin{vmatrix}C & A \\ O & -E\end{vmatrix}$